<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="description"><meta name="viewport" content="width=device-width, initial-scale=1"><title>scala学习笔记【4】映射和元组 · Nummy</title><link rel="short icon" href="/favicon.ico"><!-- font--><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Roboto Mono"><!-- icon--><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><!-- theme style--><link rel="stylesheet" href="/css/style.css"></head><body><div id="main"><header><a href="/." class="logo">Nummy</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li><li class="nav-link"><a href="/categories/" target="_self">Categories</a></li><li class="nav-link"><a href="/tags/" target="_self">Tags</a></li><li class="nav-link"><a href="/about/" target="_self">About</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">scala学习笔记【4】映射和元组</h1><span class="post-time">Sep 3, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Directory</h3><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#构造映射"><span class="toc-text">构造映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取映射的值"><span class="toc-text">获取映射的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新映射中的值"><span class="toc-text">更新映射中的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#迭代映射"><span class="toc-text">迭代映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#已排序映射"><span class="toc-text">已排序映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拉链操作"><span class="toc-text">拉链操作</span></a></li></ol></div><div class="post-content"><h3 id="构造映射"><a href="#构造映射" class="headerlink" title="构造映射"></a>构造映射</h3><p>不可变映射<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> score = <span class="type">Map</span>(<span class="string">"Alice"</span>-&gt;<span class="number">80</span>)</div></pre></td></tr></table></figure></p>
<p>可变映射<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> score = scala.collection.mutable.<span class="type">Map</span>(<span class="string">"Alice"</span><span class="number">-90</span>)</div></pre></td></tr></table></figure></p>
<p>在scala中，映射是一个对偶，对偶是两个值构成的组，这两个值不一定是同一类型。</p>
<p>使用<code>-&gt;</code>来创建对偶。</p>
<h3 id="获取映射的值"><a href="#获取映射的值" class="headerlink" title="获取映射的值"></a>获取映射的值</h3><p>在scala中使用()表示法来查找某个键对应的值。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> bobscore = scores(<span class="string">"Bob"</span>)</div></pre></td></tr></table></figure></p>
<p>如果映射并不包含请求中使用的键，则会抛出异常。<br>要检查映射中是否有某个指定的键，可以使用contains方法。</p>
<p>除此之外，我们还可以使用getOrElse方法。</p>
<h3 id="更新映射中的值"><a href="#更新映射中的值" class="headerlink" title="更新映射中的值"></a>更新映射中的值</h3><p>在可变映射中，可以更新映射值，做法是在=的左侧使用()。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scores(<span class="string">"Bob"</span>) = <span class="number">10</span></div></pre></td></tr></table></figure></p>
<p>也可以使用 += 来添加多个关系：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scores +=  (<span class="string">"Kate"</span> -&gt; <span class="number">80</span>)</div></pre></td></tr></table></figure></p>
<p>使用-=移除某个键和对应的值。</p>
<h3 id="迭代映射"><a href="#迭代映射" class="headerlink" title="迭代映射"></a>迭代映射</h3><p>使用for循环遍历映射中所有的键：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>( (k, v) &lt;- map)</div></pre></td></tr></table></figure></p>
<p>访问键或者值：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">scores.keySet</div><div class="line">scores.values</div></pre></td></tr></table></figure></p>
<p>反转映射<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>( (k, v) &lt;- map) <span class="keyword">yield</span> (v, k)</div></pre></td></tr></table></figure></p>
<h3 id="已排序映射"><a href="#已排序映射" class="headerlink" title="已排序映射"></a>已排序映射</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> scores = scala.collections.immutable.<span class="type">SortedMap</span>(<span class="string">"A"</span>-&gt;<span class="number">1</span>, <span class="string">"B"</span>-&gt;<span class="number">2</span>)</div></pre></td></tr></table></figure>
<p>如果需要按插入顺序访问所有键的话，使用LinkedHashMap。</p>
<p>###　元组<br>元组是不同类型值的集合。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">val t = (1, &quot;a&quot;, 3.14)</div></pre></td></tr></table></figure></p>
<p>和数组或字符串中的位置不同，元组从1开始而不是0。</p>
<p>通常，使用模式匹配来获取元组的组员。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> (first , second, third ) = t</div></pre></td></tr></table></figure></p>
<p>如果并不是所有的部件都需要，则可以在不需要的位置使用_。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> (first, second, _) =  t</div></pre></td></tr></table></figure></p>
<h3 id="拉链操作"><a href="#拉链操作" class="headerlink" title="拉链操作"></a>拉链操作</h3><p>使用元组的原因之一是多个值绑定在一起，以便它们能够一起被处理，这通常可以用zip方法实现。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> symbols = <span class="type">Array</span>(<span class="string">"&lt;"</span>,<span class="string">"-"</span>, <span class="string">"&gt;"</span>)</div><div class="line"><span class="keyword">val</span> counts = <span class="type">Array</span>(<span class="number">2</span>,<span class="number">10</span>,<span class="number">2</span>)</div><div class="line"><span class="keyword">val</span> paris = symbols.zip(counts)</div></pre></td></tr></table></figure></p>
<p>输出对偶的数组：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">Array</span>((<span class="string">"&lt;"</span>,<span class="number">2</span>),(<span class="string">"-"</span>,<span class="number">10</span>),(<span class="string">"&gt;"</span>,<span class="number">2</span>))</div></pre></td></tr></table></figure></p>
<p>使用toMap可以将对偶的集合转换成映射。</p>
</div></article><div class="tags"><a href="/tags/scala/">scala</a></div><div class="paginator"><a href="/2016/09/03/scala-array/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div data-thread-key="http://nummy.github.io/2016/09/03/scala-map-and-tuple/index.html" data-title="scala学习笔记【4】映射和元组" data-url="http://nummy.github.io/2016/09/03/scala-map-and-tuple/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "nummy" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section></section><footer><div class="copyright"><p>&copy;2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Nummy Lee</span></p><p class="theme">Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div></body><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></html>