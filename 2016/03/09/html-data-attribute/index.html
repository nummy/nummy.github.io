<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="description"><meta name="viewport" content="width=device-width, initial-scale=1"><title>HTML data属性 · Nummy</title><link rel="short icon" href="/favicon.ico"><!-- font--><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Roboto Mono"><!-- icon--><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><!-- theme style--><link rel="stylesheet" href="/css/style.css"></head><body><div id="main"><header><a href="/." class="logo">Nummy</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li><li class="nav-link"><a href="/categories/" target="_self">Categories</a></li><li class="nav-link"><a href="/tags/" target="_self">Tags</a></li><li class="nav-link"><a href="/about/" target="_self">About</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">HTML data属性</h1><span class="post-time">Mar 9, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Directory</h3><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用data属性的简单示例"><span class="toc-text">使用data属性的简单示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用getAttribute以及setAttribute"><span class="toc-text">使用getAttribute以及setAttribute</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用dataset-API"><span class="toc-text">使用dataset API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用jQuery-attr方法"><span class="toc-text">使用jQuery.attr方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用jQuery-data方法"><span class="toc-text">使用jQuery.data方法</span></a></li></ol></div><div class="post-content"><p>新的HTML5标准允许你在普通的元素标签里，嵌入类似data-*的属性，来实现一些简单数据的存取。它的数量不受限制，并且也能由javascript动态修改，也支持CSS选择器进行样式设置。这使得data属性特别灵活，也非常强大。有了这样的属性我们能够更加有序直观的进行数据预设或存储。</p>
<h3 id="使用data属性的简单示例"><a href="#使用data属性的简单示例" class="headerlink" title="使用data属性的简单示例"></a>使用data属性的简单示例</h3><p>例如，给一个<code>span</code>元素添加<code>data-date</code>属性，代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;span data-date=&quot;2016.3.9&quot; id=&quot;demo&quot;&gt;Song&lt;/span&gt;</div></pre></td></tr></table></figure></p>
<p>由上可以看出，给HTML元素添加自定义属性，只需要使用<code>data-</code>前缀加上自定义属性名即可。</p>
<p>那么在JavaScript中如何操作自定义的属性值了，有以下四种方法。</p>
<h3 id="使用getAttribute以及setAttribute"><a href="#使用getAttribute以及setAttribute" class="headerlink" title="使用getAttribute以及setAttribute"></a>使用getAttribute以及setAttribute</h3><p>作为HTML元素的标签，dataset的存取也服从getAttribute、setAttribute，而且这两个方法兼容性也最广。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//获取属性</div><div class="line">var date = document.getElementById(&quot;demo&quot;).getAttribute(&quot;data-date&quot;);</div><div class="line"></div><div class="line">//设置属性</div><div class="line">document.getElementById(&quot;demo&quot;).setAttribute(&quot;data-date&quot;,&quot;2016.3.6&quot;);</div></pre></td></tr></table></figure></p>
<h3 id="使用dataset-API"><a href="#使用dataset-API" class="headerlink" title="使用dataset API"></a>使用dataset API</h3><p>通过.dataset API，我们可以更方便的获取元素的所有data字段，并以对象的方式，方便存取和遍历。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//获取属性</div><div class="line">var date = document.getElementById(&quot;demo&quot;).dataset.date;</div><div class="line">console.log(date);</div><div class="line"></div><div class="line">//设置属性</div><div class="line">document.getElementById(&quot;demo&quot;).dataset.date = &quot;2016.3.8&quot;;</div><div class="line"></div><div class="line">//增加属性</div><div class="line">document.getElementById(&quot;demo&quot;).dataset.time = &quot;19:30&quot;;</div></pre></td></tr></table></figure></p>
<p>这时候我们在访问data时，就不需要”data-“关键词了，直接利用.dataset.name就可以访问到。这比上面的方法更方便。所做出的任何更改，都是可以实时反映到元素data属性上的。</p>
<p>如果涉及到连字符”-“，可以采取驼峰化的方法来存取：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;span id=&quot;en&quot; data-user-name=&quot;nummy&quot;&gt;&lt;/span&gt;</div></pre></td></tr></table></figure></p>
<p>其中的<code>user-name</code>要写成<code>userName</code>。</p>
<h3 id="使用jQuery-attr方法"><a href="#使用jQuery-attr方法" class="headerlink" title="使用jQuery.attr方法"></a>使用jQuery.attr方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//获取属性</div><div class="line">var date = $(&quot;#demo&quot;).attr(&quot;data-date&quot;);</div><div class="line"></div><div class="line">//设置属性</div><div class="line">$(&quot;#demo&quot;).attr(&quot;data-date&quot;,&quot;2016.3.7&quot;);</div></pre></td></tr></table></figure>
<p>这与jQuery.attr运用在其他属性上时的情况完全一样，并且所做出的任何更改，都是可以实时反映到元素data属性上的。</p>
<h3 id="使用jQuery-data方法"><a href="#使用jQuery-data方法" class="headerlink" title="使用jQuery.data方法"></a>使用jQuery.data方法</h3><p>这个方法不需要使用<code>data-</code>关键字。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//获取属性</div><div class="line">var date = $(&quot;#demo&quot;).data(&quot;date&quot;);</div><div class="line"></div><div class="line">//设置属性</div><div class="line">$(&quot;#demo&quot;).data(&quot;date&quot;,&quot;2016.3.7&quot;);</div></pre></td></tr></table></figure></p>
<p>这样的方法也能出色的存取data属性，但是需要注意，jQuery.data对data数据做出的更改，不会反映到HTML元素data属性上。也就是说在jQuery中<code>data-date</code>属性的值为<code>2016.3.7</code>，但是在HTML元素中还是为<code>2016.3.6</code>。</p>
</div></article><div class="tags"><a href="/tags/javascript/">javascript</a></div><div class="paginator"><a href="/2016/03/16/zookeeper/" class="prev"><i class="iconfont icon-left"></i><span> Prev</span></a><a href="/2016/03/07/toastr/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div data-thread-key="http://nummy.github.io/2016/03/09/html-data-attribute/index.html" data-title="HTML data属性" data-url="http://nummy.github.io/2016/03/09/html-data-attribute/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "nummy" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section></section><footer><div class="copyright"><p>&copy;2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Nummy Lee</span></p><p class="theme">Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div></body><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></html>